{"mappings":"iiBAAA,IAKkBA,EALlBC,EAAAC,EAAA,S,0BAIMC,EAAmB,sBACrBC,EAAoD,QAAtCJ,GAAA,EAAAC,EAAAI,sBAAqBF,UAAiB,IAAtCH,IAA0C,CACxDM,MAAO,GACPC,QAAS,IAGPC,EAAOC,SAASC,cAAc,sBAEX,KAArBN,EAAYE,OAAsC,KAAvBF,EAAYG,UACvCC,EAAKG,SAASL,MAAMM,MAAQR,EAAYE,MACxCE,EAAKG,SAASJ,QAAQK,MAAQR,EAAYG,QAC1CM,EAAAC,GAAOC,QAAQ,2DAGnB,IAAMC,EAAsBH,EAAAI,EAAA,EAC5B,SAAoBC,GAChBd,EAAYc,EAAMC,OAAOC,MAAQF,EAAMC,OAAOP,OAC9C,EAAAX,EAAAoB,oBAAmBlB,EAAkBC,E,GAHQ,KAwBjDI,EAAKc,iBAAiB,QAASN,GAC/BR,EAAKc,iBAAiB,UAnBtB,SAAoBJ,GAGhB,OAFAA,EAAMK,iBAEmB,KAArBnB,EAAYE,OAAsC,KAAvBF,EAAYG,SACvCiB,QAAQC,IAAIrB,IAEZ,EAAAH,EAAAyB,wBAAuBvB,GACvBC,EAAYE,MAAQ,GACpBF,EAAYG,QAAU,GAEtBW,EAAMC,OAAOQ,QACbd,EAAAC,GAAOC,QAAQ,0DACR,IAEXF,EAAAC,GAAOc,MAAM,+BACN,E","sources":["src/js/03-feedback.js"],"sourcesContent":["import { saveToLocalStorage, loadFromLocalStorage, removeFromLocalStorage } from './safe-storage-module';\nimport throttle from 'lodash.throttle';\nimport toastr from \"toastr\"\n\nconst FORM_CONTENT_KEY = \"feedback-form-state\";\nlet formContent = loadFromLocalStorage(FORM_CONTENT_KEY) ?? {\n    email: \"\",\n    message: \"\",\n}\n\nconst form = document.querySelector(\"form.feedback-form\");\n\nif (formContent.email !==\"\" || formContent.message !==\"\") {\n    form.elements.email.value = formContent.email;\n    form.elements.message.value = formContent.message;\n    toastr.success(\"Form fields are recovered </br> from the Local storage\");\n};\n\nconst throttledHandleForm = throttle(handleForm, 500);\nfunction handleForm(event) {\n    formContent[event.target.name] = event.target.value;\n    saveToLocalStorage(FORM_CONTENT_KEY, formContent);\n};\n\nfunction submitForm(event) {\n    event.preventDefault();\n    // в заданні немає такого, але перевіряєм валідність даніх\n    if (formContent.email !==\"\" && formContent.message !==\"\") {\n        console.log(formContent);\n\n        removeFromLocalStorage(FORM_CONTENT_KEY);\n        formContent.email = \"\";\n        formContent.message = \"\";\n\n        event.target.reset();\n        toastr.success(\"Submission seccesfull! </br> Check the Local storage.\");\n        return true;\n    }\n    toastr.error(\"All fields must be filled!\");\n    return false;\n}\n\nform.addEventListener(\"input\", throttledHandleForm);\nform.addEventListener(\"submit\", submitForm);\n\n\n\n"],"names":["$b00c40859be242c5$var$ref","$7euxC","parcelRequire","$b00c40859be242c5$var$FORM_CONTENT_KEY","$b00c40859be242c5$var$formContent","loadFromLocalStorage","email","message","$b00c40859be242c5$var$form","document","querySelector","elements","value","$parcel$interopDefault","$jvJkn","success","$b00c40859be242c5$var$throttledHandleForm","$dCfNN","event","target","name","saveToLocalStorage","addEventListener","preventDefault","console","log","removeFromLocalStorage","reset","error"],"version":3,"file":"03-feedback.3572c1a2.js.map"}